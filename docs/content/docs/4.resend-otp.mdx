---
title: Resend OTP
description: How to resend OTP codes for authentication
---

# Resend OTP

Simple guide for resending OTP codes.

## How OTP Works

- **Expiration**: OTP codes expire after 4 minutes (240 seconds)
- **Single Use**: Each OTP can only be used once
- **Auto-Generated**: 4-digit random codes

## Resend OTP Endpoint

Use this dedicated endpoint for resending OTP codes for any purpose:

### Endpoint

```http
POST /api/sms-service/request/otp/
```

### Request

```json
{
  "phone": "09123456789",
  "otp_usage": "AUTHENTICATE"
}
```

### Parameters

| Parameter   | Type   | Required | Description                                         |
| ----------- | ------ | -------- | --------------------------------------------------- |
| `phone`     | string | Yes      | Iranian phone number (11 digits starting with 09)   |
| `otp_usage` | string | Yes      | Purpose: `AUTHENTICATE`, `RESET_PASSWORD`, `VERIFY` |

### Response

**Success:**

```json
{
  "success": true,
  "status": 200,
  "message": "کد تایید به شماره 09123456789 ارسال شد",
  "data": null
}
```

**Validation Error:**

```json
{
  "success": false,
  "status": 400,
  "message": "خطا در اطلاعات ارسالی",
  "data": null
}
```

## Usage Examples

### For Authentication/Registration

```json
{
  "phone": "09123456789",
  "otp_usage": "AUTHENTICATE"
}
```

### For Password Reset

```json
{
  "phone": "09123456789",
  "otp_usage": "RESET_PASSWORD"
}
```

### For General Verification

```json
{
  "phone": "09123456789",
  "otp_usage": "VERIFY"
}
```

## Behavior

### How Resending Works

1. **If OTP exists and not expired**: Returns success message without sending new OTP
2. **If OTP expired**: Deletes old OTP and creates/sends new one
3. **If no OTP exists**: Creates and sends new OTP

### OTP Expiration

- **Duration**: 4 minutes (240 seconds) from creation
- **Auto-cleanup**: Expired OTPs are automatically deleted when new ones are requested

## Notes

- Each `otp_usage` type has separate OTP codes
- Previous unused OTPs are deleted when expired
- OTP is printed to console for development (SMS service commented out)
- Always specify the correct `otp_usage` for your flow

### TypeScript Interface

```ts
interface ResendOTPRequest {
  phone: string;
  otp_usage: "AUTHENTICATE" | "RESET_PASSWORD" | "VERIFY";
}

interface ResendOTPResponse extends ApiResponseType<null> {}
```
